<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QualityChecks: Introduction to WinCC OA Qualitycheck</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../extra_stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QualityChecks
    </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d6/d7a/md_data_docuSources_user.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Introduction to WinCC OA Qualitycheck </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The tool is implemented as a WinCC OA Subproject and is divided into two parts:</p>
<ul>
<li>Quality Checks</li>
<li>Ctrlppcheck</li>
</ul>
<h1><a class="anchor" id="autotoc_md24"></a>
Quality Checks</h1>
<p>Quality checks check panels and ctrl code based on the following software metrics and WinCC OA specific checks:</p>
<ul>
<li>McCabe Complexity</li>
<li>Code lines per script / Libs</li>
<li>Code lines per function</li>
<li>Number of function per script / libs</li>
<li>Number of functions per panel</li>
<li>Number of parameters per function</li>
<li>Number of properties per panel</li>
<li>Number of files per folder</li>
<li>Pictures used in the project</li>
<li>Overloaded files from the version, for maintenance purposes</li>
<li>and other</li>
</ul>
<h1><a class="anchor" id="autotoc_md25"></a>
Definition of Metrics</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Metric   </th><th class="markdownTableHeadNone">Definition    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">NLOC   </td><td class="markdownTableBodyNone">Number Lines of Code - all lines of a file that are not comment lines or empty lines.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CCN   </td><td class="markdownTableBodyNone">Cyclomatic Complexity - <a href="https://en.wikipedia.org/wiki/Cyclomatic_complexity">https://en.wikipedia.org/wiki/Cyclomatic_complexity</a>   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md26"></a>
CtrlppCheck</h1>
<p>CtrlppCheck provides static code analysis for the WinCC OA Ctrl/Ctrl++ language. <br  />
 Included are, among many others, these checks:</p>
<ul>
<li>Undefined variables</li>
<li>Unused variables</li>
<li>unused functions</li>
<li>Dead code</li>
<li>Comparison is always true / false</li>
<li>Return value of a specific function is not used e.g. return from dpExists ()</li>
</ul>
<p>Please understand that there are limits of CtrlppCheck. CtrlppCheck is rarely wrong about reported errors. But there are many bugs that it doesn't detect. You will find more bugs in your software by testing your software carefully.</p>
<h1><a class="anchor" id="autotoc_md27"></a>
GEDI Integration</h1>
<p>Both types of checks can be used in WinCC OA's GEDI editor via. They are started from the IDE and results are displayed in the IDE:</p>
<ul>
<li>Drop-Down menu "Quality Checks" in the GEDI menu bar</li>
<li>Dock-Module for the GEDI with results</li>
<li>Script check via button "CtrlppCheck" in the script editor</li>
</ul>
<h1><a class="anchor" id="autotoc_md28"></a>
Execution From Command Line</h1>
<p>Both types of checks may also be executed from the command line to facilitate integration in automated build environments for continuous integration. Results are provided via result files for further processing. <br  />
</p>
<h1><a class="anchor" id="autotoc_md29"></a>
Quality Checks</h1>
<p>Each of the quality checks documented below can return a score between 0 and 100. <br  />
 The score is calculated like this: <br  />
 Each check in a qualitycheck represents a point. <br  />
 Each check not passed is rewarded an error point. <br  />
 The final result (score) is the percentage or checks not passed in relation to the number of test in total. <br  />
 Checks disabled in the settings dialogue are not counted. <br  />
 A check can be weighed by assigning it a higher number of points in the settings dialogue. If such a chek fails it will also be awarded a higher number or error points.</p>
<h2><a class="anchor" id="autotoc_md30"></a>
Available Checks</h2>
<h3><a class="anchor" id="autotoc_md31"></a>
General static check</h3>
<p>These checks give an initial assessment of the entire folder and its files and are therefore carried out for all folder checks (e.g. pictures, scripts).</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Check per folder   </th><th class="markdownTableHeadNone">Good range   </th><th class="markdownTableHeadNone">Reason    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">is Empty - without folders &amp; files   </td><td class="markdownTableBodyNone">FALSE   </td><td class="markdownTableBodyNone">An empty folder makes the overview more difficult    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Count of sub directories - Number of subfolders   </td><td class="markdownTableBodyNone">&lt;= 5   </td><td class="markdownTableBodyNone">More than 5 subfolders make finding it difficult    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Count of files recursive - Number of files recursively over all subfolders   </td><td class="markdownTableBodyNone">&gt; = 0   </td><td class="markdownTableBodyNone">in empty folder structures make the clarity    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Count of files - number of files in this folder   </td><td class="markdownTableBodyNone">&lt;= 10   </td><td class="markdownTableBodyNone">More than 10 files make finding it difficult   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Additional Information    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Average CCN (Cyclomatic Complexity No. McCabe-Metric) - Average complexity    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Average NLOC (No. Lines Of Code) Average number of lines of code    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CCN (Cyclomatic Complexity No. McCabe-Metric) - Sum of the complexity of all files in this folder    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">NLOC (No. Lines Of Code) - Sum of all lines of code   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md32"></a>
Images Check - static (QgStaticCheck_Pictures)</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Check per file   </th><th class="markdownTableHeadNone">Good range    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Size - File size   </td><td class="markdownTableBodyNone">1 MB    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">File Extension / File Type   </td><td class="markdownTableBodyNone">bmp, xpm, jpg, png, svg, jpeg, gif, mng, ico, wmf   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md33"></a>
Script Check - static (QgStaticCheck_Scripts)</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Check per script   </th><th class="markdownTableHeadNone">Good range   </th><th class="markdownTableHeadNone">Reason    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Is an example file - Ex. File   </td><td class="markdownTableBodyNone">FALSE   </td><td class="markdownTableBodyNone">Ex. Scripts (under the folder Examples) are not included in the calculation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Is calculated - is calculated   </td><td class="markdownTableBodyNone">TRUE   </td><td class="markdownTableBodyNone">It can not be calculated because it eg. is encrypted.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">NLOC code lines   </td><td class="markdownTableBodyNone">4-600   </td><td class="markdownTableBodyNone">The entire script is difficult to analyze over 600 lines   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Check per function   </th><th class="markdownTableHeadNone">Good range   </th><th class="markdownTableHeadNone">Reason    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">NLOC (No. Lines Of Code) - Code Lines   </td><td class="markdownTableBodyNone">4-80   </td><td class="markdownTableBodyNone">More than 80 lines of code are difficult to understand in one function    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Count of Parameter - Transfer parameter of function   </td><td class="markdownTableBodyNone">&lt;= 10   </td><td class="markdownTableBodyNone">More than 10 parameters make a function difficult to read    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Count of lines - total lines   </td><td class="markdownTableBodyNone">NA   </td><td class="markdownTableBodyNone">This number compared to the lines of code suggests the comment style    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CCN (Cyclomatic Complexity No. McCabe-Metric)   </td><td class="markdownTableBodyNone">&lt;= 15   </td><td class="markdownTableBodyNone">Complexity greater than 15 makes a function difficult to analyze later   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md34"></a>
Library check - static (QgStaticCheck_Libs)</h3>
<p>This check is similar to the script check and refers to the library folder.</p>
<h3><a class="anchor" id="autotoc_md35"></a>
Panels Check - static (QgStaticCheck_Panels)</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Check per panel   </th><th class="markdownTableHeadNone">Good range   </th><th class="markdownTableHeadNone">Reason    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Is an example file - Ex. File   </td><td class="markdownTableBodyNone">FALSE   </td><td class="markdownTableBodyNone">Ex. Panels (under the folder examples) are not included in the calculation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Is calculated - is calculated   </td><td class="markdownTableBodyNone">TRUE   </td><td class="markdownTableBodyNone">It can not be calculated because it eg. is encrypted.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Is encrypted - encrypted   </td><td class="markdownTableBodyNone">FALSE   </td><td class="markdownTableBodyNone">Encrypted panels can not be calculated and therefore no quality statement can be made    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Backup panel (.bak) - Backup panel available   </td><td class="markdownTableBodyNone">FALSE   </td><td class="markdownTableBodyNone">Backup Panel should be deleted before delivery   </td></tr>
</table>
<p>| Properties NA Important properties of a panel are stored in order to provide a later function (comparison with old version) | | Count of Shapes - Number of Graphic Elements | &lt;= 100 | More than 100 elements complicate an analysis of the panel | | Count of Properties - Number of Properties | NA | - | | Count of Events - Number of Events | &lt;= 100 | More than 100 events complicate an analysis of the panel |</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Check per event   </th><th class="markdownTableHeadNone">Good range   </th><th class="markdownTableHeadNone">Reason    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Count of functions - Number of functions   </td><td class="markdownTableBodyNone">1-5   </td><td class="markdownTableBodyNone">More than 5 functions in one event are difficult to analyze    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">NLOC (No. Lines Of Code) - Code Lines   </td><td class="markdownTableBodyNone">4-600   </td><td class="markdownTableBodyNone">More than 600 lines of code are difficult to survey in an event   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Check per function   </th><th class="markdownTableHeadNone">Good range   </th><th class="markdownTableHeadNone">Reason    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">NLOC (No. Lines Of Code) - Code Lines   </td><td class="markdownTableBodyNone">4-80   </td><td class="markdownTableBodyNone">More than 80 lines of code are difficult to understand in one function    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Count of Parameter - Transfer parameter of function   </td><td class="markdownTableBodyNone">&lt;= 10   </td><td class="markdownTableBodyNone">More than 10 parameters make a function difficult to read    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Count of lines - total lines   </td><td class="markdownTableBodyNone">NA   </td><td class="markdownTableBodyNone">This number compared to the lines of code suggests the comment style    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CCN (Cyclomatic Complexity No. McCabe-Metric)   </td><td class="markdownTableBodyNone">&lt;= 15   </td><td class="markdownTableBodyNone">Complexity greater than 15 makes a function difficult to analyze later   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md36"></a>
Overloaded Files Check - static (QgStaticCheck_OverloadedFiles)</h3>
<p>The Check "Overloaded Files Check" checks if files from the product have been overwritten in the project. <br  />
 This overloading of files is generally possible, but carries risks when upgrading the product and should therefore be carefully considered. However, there are some files that may be overloaded in certain cases. These exceptions were provided in the check and are therefore allowed. <br  />
 Allowed files are:</p>
<div class="fragment"><div class="line">CONFIG_REL_PATH + &quot;powerconfig&quot;</div>
<div class="line">DATA_REL_PATH + &quot;RDBSetup / ora / RDB_config_template.sql&quot;</div>
<div class="line">SCRIPTS_REL_PATH + &quot;userDrivers.ctl&quot;</div>
<div class="line">SCRIPTS_REL_PATH + &quot;userPara.ctl&quot;</div>
<div class="line">LIBS_REL_PATH + &quot;aesuser.ctl&quot;</div>
<div class="line">LIBS_REL_PATH + &quot;asModifyDisplay.ctl&quot;</div>
<div class="line">LIBS_REL_PATH + &quot;driverSettings_HOOK.ctl&quot;</div>
<div class="line">PANELS_REL_PATH + &quot;vision / aes / _AS_propFilterExtended.pnl&quot;</div>
<div class="line">PANELS_REL_PATH + &quot;vision / aes / _ES_propFilterExtended.pnl&quot;</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Check   </th><th class="markdownTableHeadNone">Good range    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Is file overloaded   </td><td class="markdownTableBodyNone">FALSE   </td></tr>
</table>
<p>WinCCOA Internal Check - static (QgStaticCheck_Internal) This check checks whether certain files, for WinCCOA internal functions, eg. the installation completion of the add-on, are present.</p>
<p>| Check | Good range | | File exists - File exists | TRUE |</p>
<h1><a class="anchor" id="autotoc_md37"></a>
CtrlppCheck</h1>
<h2><a class="anchor" id="autotoc_md38"></a>
Available Checks</h2>
<h3><a class="anchor" id="autotoc_md39"></a>
Severities</h3>
<p>The possible severities for messages are: <br  />
</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Severity   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">error   </td><td class="markdownTableBodyNone">used when bugs are found; Code that will lead to errors.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">warning   </td><td class="markdownTableBodyNone">suggestions about defensive programming to prevent bugs    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">style   </td><td class="markdownTableBodyNone">stylistic issues related to code cleanup (unused functions redundant code, constness, and such); code is difficult to read    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">performance   </td><td class="markdownTableBodyNone">Suggestions for making the code faster. These suggestions are only based on common knowledge. It is not certain you'll get any measurable difference in speed by fixing these messages.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">portability   </td><td class="markdownTableBodyNone">portability warnings. 64-bit portability. The code might work differently on different compilers. etc.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">information   </td><td class="markdownTableBodyNone">Configuration problems. The recommendation is to only enable these during configuration.   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md40"></a>
Suppression of Messages</h3>
<p>If the reported problem is not a problem or is accepted, the message can be suppressed. Activate this functionality via settings - Inline Suppression.</p>
<p>You can specify that the inline suppression only applies to a specific symbol:</p>
<div class="fragment"><div class="line"><span class="comment">// ctrlppcheck-suppress undefinedVariable</span></div>
<div class="line">unknownVar = 3;</div>
</div><!-- fragment --><p>You can describe the reason for the suppression with a commentary. For this a semicolon (;) or two slashes (//) can be used for the separation.</p>
<div class="fragment"><div class="line"><span class="comment">// ctrlppcheck-suppress undefinedVariable ; some comment</span></div>
<div class="line"><span class="comment">// ctrlppcheck-suppress undefinedVariable // some comment</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md41"></a>
Use From The Command Line</h2>
<p>Syntax: ctrlppcheck [OPTIONS] [files or paths]</p>
<p>If a directory is given instead of a filename, *.ctl files are checked recursively from the given directory.</p>
<p>For all options start without parameters or pass -h, &ndash;help.</p>
<p>Example usage to check whole WinCC OA project: </p><div class="fragment"><div class="line">ctrlppcheck --enable=all --quiet --rule-file=rule/ctrl_rules.xml --naming-rule-file=rule/variableNaming.xml --library=&lt;winccoa_install_path&gt;/data/DevTools/Base/ctrl.xml --suppressions-list=custom/warnings.txt --winccoa-projectName=XYZ &lt;path-to-XYZ&gt;\scripts</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md42"></a>
Check one file</h3>
<p>The first example is simple code in \scripts </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
    Copyright ETM professional control GmbH 2023 All Rights Reserved
    </li>
  </ul>
</div>
</body>
</html>
